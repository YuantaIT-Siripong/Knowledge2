{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://yuanta.co.th/schemas/structured-notes/fcn/v1.0/parameters",
  "title": "FCN v1.0 Parameter Schema",
  "description": "JSON Schema for Fixed Coupon Note (FCN) v1.0 parameters conformance validation",
  "type": "object",
  "required": [
    "product_code",
    "spec_version",
    "trade_date",
    "issue_date",
    "maturity_date",
    "notional",
    "currency",
    "underlying_assets",
    "observation_dates",
    "knock_in_barrier_pct",
    "coupon_rate_pct",
    "is_memory_coupon",
    "recovery_mode",
    "settlement_type"
  ],
  "properties": {
    "product_code": {
      "type": "string",
      "pattern": "^FCN$",
      "description": "Product identifier; must be 'FCN' for Fixed Coupon Note"
    },
    "spec_version": {
      "type": "string",
      "pattern": "^1\\.0\\.\\d+$",
      "description": "Specification version; must match v1.0.x"
    },
    "trade_date": {
      "type": "string",
      "format": "date",
      "description": "Trade execution date in ISO-8601 format (YYYY-MM-DD)"
    },
    "issue_date": {
      "type": "string",
      "format": "date",
      "description": "Note issuance date in ISO-8601 format"
    },
    "maturity_date": {
      "type": "string",
      "format": "date",
      "description": "Final maturity date in ISO-8601 format"
    },
    "notional": {
      "type": "number",
      "minimum": 0,
      "exclusiveMinimum": true,
      "description": "Notional amount; must be positive"
    },
    "currency": {
      "type": "string",
      "pattern": "^[A-Z]{3}$",
      "description": "Settlement currency in ISO-4217 format (e.g., USD, THB)"
    },
    "underlying_assets": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["symbol", "initial_level"],
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Underlying asset identifier (e.g., ticker, ISIN)"
          },
          "initial_level": {
            "type": "number",
            "minimum": 0,
            "exclusiveMinimum": true,
            "description": "Initial reference level; must be positive"
          },
          "weight": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Basket weight (for multi-asset structures); defaults to equal weight"
          }
        }
      },
      "description": "Array of underlying asset specifications"
    },
    "observation_dates": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "string",
        "format": "date"
      },
      "description": "Scheduled observation dates for coupon and barrier evaluation"
    },
    "knock_in_barrier_pct": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "exclusiveMinimum": true,
      "description": "Knock-in barrier as decimal ratio (e.g., 0.70 for 70%)"
    },
    "coupon_rate_pct": {
      "type": "number",
      "minimum": 0,
      "description": "Coupon rate per period as decimal ratio (e.g., 0.03 for 3%)"
    },
    "coupon_barrier_pct": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Coupon barrier threshold as decimal ratio; defaults to knock_in_barrier_pct if not specified"
    },
    "is_memory_coupon": {
      "type": "boolean",
      "description": "True if unpaid coupons accumulate and pay later; false otherwise"
    },
    "recovery_mode": {
      "type": "string",
      "enum": ["par-recovery", "proportional-loss"],
      "description": "Post knock-in payoff mode: par-recovery (100% notional) or proportional-loss (worst performance)"
    },
    "settlement_type": {
      "type": "string",
      "enum": ["physical-settlement", "cash-settlement"],
      "description": "Settlement mode at maturity"
    },
    "observation_style": {
      "type": "string",
      "enum": ["american", "european"],
      "default": "american",
      "description": "Barrier monitoring style: american (continuous) or european (discrete)"
    },
    "fx_reference": {
      "type": ["string", "null"],
      "description": "FX rate source identifier; required if underlying currency differs from settlement currency"
    },
    "documentation_version": {
      "type": "string",
      "default": "1.0.0",
      "description": "Traceability anchor matching spec_version"
    }
  },
  "additionalProperties": false
}
